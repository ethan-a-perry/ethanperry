---
import type {HTMLAttributes} from "astro/types";

interface Props extends HTMLAttributes<'a'> {
    href: string;
    variant?: 'default' | 'blue' | 'button' | 'icon-only';
    icon?: string;
    external?: boolean;
    classes?: string;
}

const {
    href,
    variant = 'default',
    icon,
    external,
    classes,
    ...rest
} = Astro.props as Props;

const isExternal = external || href.startsWith('http');

const isCurrentPage = Astro.url.pathname === href;
---

<a href={href} class:list={['link', `link--${variant}`, classes, {"with-icon" : !!icon}]} aria-current={isCurrentPage ? 'page' : undefined} target={isExternal ? '_blank' : undefined} rel={isExternal ? 'noopener noreferrer' : undefined} {...rest}>
    <slot />
    {icon && <svg><use href={`/assets/icons/icons.svg#${icon}`}></use></svg>}
</a>

<style>
svg {
	width: 24px;
	height: 24px;
	fill: currentColor;
}
</style>
