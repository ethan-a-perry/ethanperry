---
const iconNames = [
    "arrow-left",
    "arrow-right",
    "chevron-right",
    "open-in-new",
    "undo",
    "redo",
    "close",
    "check",
    "github",
    "goodreads",
    "instagram",
    "linkedin"
] as const;

interface Props {
    href: string;
    icon?: {
        name: (typeof iconNames)[number];
        side?: "left" | "right";
        width?: string;
        height?: string;
    };
    classes?: string;
    isNavLink?: boolean;
}

const {
    href,
    icon,
    classes,
    isNavLink = false,
    ...rest
} = Astro.props as Props;

const iconUseHref = icon ? `/assets/icons/icons.svg#${icon.name}` : undefined;

const ariaCurrent =
    isNavLink && (
        (href === "/" && Astro.url.pathname === "/") ||
        (href !== "/" && Astro.url.pathname.startsWith(href))
    ) ? "page" : undefined;
---

<a href={href} class:list={[classes, {"with-icon" : !!icon}]} aria-current={ariaCurrent} {...rest}>
    {
        icon && icon.side === "left" && (
            <svg style={`width: ${icon.width ?? "24px"}; height: ${icon.height ?? "24px"};`}>
                <use href={iconUseHref}></use>
            </svg>
        )
    }

    <slot />

    {
        icon && icon.side === "right" && (
            <svg style={`width: ${icon.width ?? "24px"}; height: ${icon.height ?? "24px"};`}>
                <use href={iconUseHref}></use>
            </svg>
        )
    }
</a>

<style>
    a {
        &.underline {
            box-shadow: 0 2px 0 0 var(--color-accent-40);
        }

        &.with-icon {
            display: flex;
            align-items: center;
            gap: 7px;
        }

        &:not(.base) {
            &.hover-text:hover {
                color: var(--color-text-50);
            }

            &:not(.hover-text, [aria-current="page"]):hover {
                background-color: rgb(255, 254, 85);
            }

            &[aria-current="page"] {
                text-decoration: line-through var(--color-accent-secondary-100);
            }
        }
    }

    svg {
        fill: currentColor;
    }
</style>