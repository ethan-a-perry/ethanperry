---
import type {HTMLAttributes} from "astro/types";

const iconNames = [
    "arrow-left",
    "arrow-right",
    "chevron-right",
    "open-in-new",
    "undo",
    "redo",
    "close",
    "check",
    "github",
    "goodreads",
    "instagram",
    "linkedin"
] as const;

interface Props extends HTMLAttributes<'a'> {
    href: string;
    icon?: {
        name: (typeof iconNames)[number];
        side?: "left" | "right";
        width?: string;
        height?: string;
    };
    classes?: string;
    isNavLink?: boolean;
}

const {
    href,
    icon,
    classes,
    isNavLink = false,
    ...rest
} = Astro.props as Props;

const iconUseHref = icon ? `/assets/icons/icons.svg#${icon.name}` : undefined;

const ariaCurrent =
    isNavLink && (
        (href === "/" && Astro.url.pathname === "/") ||
        (href !== "/" && Astro.url.pathname.startsWith(href))
    ) ? "page" : undefined;
---

<a href={href} class:list={[classes, {"with-icon" : !!icon}]} aria-current={ariaCurrent} {...rest}>
    <slot />

    {
        icon && (icon.side === "right" || icon.side === "left") && (
            <svg style={`width: ${icon.width ?? "24px"}; height: ${icon.height ?? "24px"};`}>
                <use href={iconUseHref}></use>
            </svg>
        )
    }
</a>

<style>
    svg {
        fill: currentColor;
    }
</style>
