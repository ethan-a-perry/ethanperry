---
import siteData from "../data/site-data.json";
import {getStructuredData} from '../wwwroot/js/structured-data.js';

const {
    title,
    description,
    url = Astro.url,
    image,
    metadata,
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.url);
const structuredData = getStructuredData(canonicalURL, Astro.url.pathname, title, description, image, metadata);
---
{
    structuredData && (
        <!-- Structured Data -->
        <script type="application/ld+json" set:html={JSON.stringify(structuredData, null, 2)}></script>
    )
}

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="website">
<meta property="og:title" content={title}>
<meta property="og:description" content={description}>
<meta property="og:site_name" content={title}>
<meta property="og:image" content={image?.src || siteData.image.src}>
<meta property="og:image:url" content={image?.src || siteData.image.src}>
<meta property="og:image:secure_url" content={image?.src || siteData.image.src}>
<meta property="og:image:alt" content={image?.alt || siteData.image.alt}>
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content={title}>
<meta name="twitter:description" content={description}>
<meta name="twitter:image" content={image?.src || siteData.image.src}>
<meta name="twitter:image:alt" content={image?.alt || siteData.image.alt} />